# 6_性能考虑

* [6.1 内存合并]
* [6.2 隐藏内存延迟]
* [6.3 线程粗化]
* [6.4 优化检查清单]
* [6.5 了解计算瓶颈]
* [6.6 总结]
* [练习]

并行程序的执行速度可能会因程序对资源的需求与硬件资源约束之间的相互作用而大相径庭。管理并行代码与硬件资源约束之间的相互作用对于在几乎所有并行编程模型中实现高性能至关重要。这是一项需要深入理解硬件架构的实践技能，最有效的学习方式是通过在为高性能设计的并行编程模型中进行实践练习。

到目前为止，我们已经了解了 GPU 架构的各个方面及其对性能的影响。在第 4 章《计算架构与调度》中，我们学习了 GPU 的计算架构及相关性能考虑因素，如控制分歧和占用率。在第 5 章《内存架构与数据局部性》中，我们了解了 GPU 的片上内存架构以及使用共享内存瓦片来实现更多数据重用的方法。在本章中，我们将简要介绍片外内存（DRAM）架构，并讨论相关的性能考虑因素，如内存合并和内存延迟隐藏。随后，我们将讨论一种重要的优化类型——线程粗化——这种优化可能针对架构的不同方面，具体取决于应用场景。最后，我们将用一份常见性能优化的检查清单来总结本部分内容，这将作为优化书中第二和第三部分讨论的并行模式性能的指南。

在不同的应用中，不同的架构约束可能主导性能，并成为性能的限制因素，通常被称为瓶颈。通过将一种资源的使用权衡为另一种资源的使用，通常可以显著改善在特定 CUDA 设备上的应用性能。如果缓解的资源约束在策略应用前是主要约束，而加重的资源约束对并行执行没有负面影响，那么这种策略效果很好。如果没有这样的理解，性能调优将变成猜测；可行的策略可能会导致性能提升，也可能不会。
